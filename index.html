<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
        </script>
    
    <link rel="stylesheet" type="text/css" href="styles.css"/>
    <title>Index</title>
</head>
<body>
    <div class="container text-center mb-5">
        <header>
            <h2 class="mt-5 mb-2">Book Management System</h2>
        </header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark mt-5 mb-5">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">My Books</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <a class="btn btn-outline-primary me-2" href="add.html">Add Book</a>
                    <a class="btn btn-outline-secondary" href="#">Home</a>
                </div>
            </div>
        </nav>
        <section>
            <div class="table-responsive">
                <table class="table table-light table-striped" id="table-data">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Book title</th>
                            <th>Author</th>
                            <th>Genre</th>
                            <th>ISBN</th>
                            <th>Publication year</th>
                            <th>Date added</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                    </tbody>
                </table>
            </div>
        </section>
    </div>
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            const defaultBooks = [
                {
                    id: 1,
                    title: "To Kill a Mockingbird",
                    author: "Harper Lee",
                    genre: "Fiction",
                    isbn: "978-0-06-112008-4",
                    year: 1960,
                    dateAdded: "2024-09-20"
                },
                {
                    id: 2,
                    title: "1984",
                    author: "George Orwell",
                    genre: "Dystopian",
                    isbn: "978-0-452-28423-4",
                    year: 1949,
                    dateAdded: "2024-09-20"
                },
                {
                    id: 3,
                    title: "Pride and Prejudice",
                    author: "Jane Austen",
                    genre: "Romance",
                    isbn: "978-0-19-953556-9",
                    year: 1813,
                    dateAdded: "2024-09-21"
                },
                {
                    id: 4,
                    title: "The Great Gatsby",
                    author: "F. Scott Fitzgerald",
                    genre: "Fiction",
                    isbn: "978-0-7432-7356-5",
                    year: 1925,
                    dateAdded: "2024-09-21"
                },
                {
                    id: 5,
                    title: "The Catcher in the Rye",
                    author: "J.D. Salinger",
                    genre: "Fiction",
                    isbn: "978-0-316-76948-0",
                    year: 1951,
                    dateAdded: "2024-09-22"
                },
                {
                    id: 6,
                    title: "Brave New World",
                    author: "Aldous Huxley",
                    genre: "Dystopian",
                    isbn: "978-0-06-085052-4",
                    year: 1932,
                    dateAdded: "2024-09-22"
                },
                {
                    id: 7,
                    title: "Moby-Dick",
                    author: "Herman Melville",
                    genre: "Adventure",
                    isbn: "978-0-14-243724-7",
                    year: 1851,
                    dateAdded: "2024-09-23"
                },
                {
                    id: 8,
                    title: "The Hobbit",
                    author: "J.R.R. Tolkien",
                    genre: "Fantasy",
                    isbn: "978-0-618-00221-3",
                    year: 1937,
                    dateAdded: "2024-09-23"
                },
                {
                    id: 9,
                    title: "War and Peace",
                    author: "Leo Tolstoy",
                    genre: "Historical",
                    isbn: "978-0-14-303999-0",
                    year: 1869,
                    dateAdded: "2024-09-23"
                },
                {
                    id: 10,
                    title: "The Alchemist",
                    author: "Paulo Coelho",
                    genre: "Adventure",
                    isbn: "978-0-06-112241-5",
                    year: 1988,
                    dateAdded: "2024-09-24"
                },
                {
                    id: 11,
                    title: "Crime and Punishment",
                    author: "Fyodor Dostoevsky",
                    genre: "Philosophical",
                    isbn: "978-0-14-044913-6",
                    year: 1866,
                    dateAdded: "2024-09-24"
                },
                {
                    id: 12,
                    title: "Anna Karenina",
                    author: "Leo Tolstoy",
                    genre: "Romance",
                    isbn: "978-0-14-303500-8",
                    year: 1877,
                    dateAdded: "2024-09-25"
                },
                {
                    id: 13,
                    title: "The Picture of Dorian Gray",
                    author: "Oscar Wilde",
                    genre: "Philosophical",
                    isbn: "978-0-14-143957-0",
                    year: 1890,
                    dateAdded: "2024-09-26"
                },
                {
                    id: 14,
                    title: "The Lord of the Rings",
                    author: "J.R.R. Tolkien",
                    genre: "Fantasy",
                    isbn: "978-0-618-26458-2",
                    year: 1954,
                    dateAdded: "2024-09-26"
                },
                {
                    id: 15,
                    title: "The Giver",
                    author: "Lois Lowry",
                    genre: "Dystopian",
                    isbn: "978-0-547-99625-6",
                    year: 1993,
                    dateAdded: "2024-09-27"
                }
            ];

            // Check if books are already in localStorage
            let books = JSON.parse(localStorage.getItem('books'));

            if (!books || books.length === 0) {
                localStorage.setItem('books', JSON.stringify(defaultBooks));
                books = defaultBooks;
            }

            renderBooks(books);
        });


        function renderBooks(books) {
            const tableBody = document.querySelector('#table-data tbody');
            tableBody.innerHTML = ''; 

            books.forEach((book, index) => {
                const row = `
                <tr>
                    <td>${index + 1}</td>
                    <td><a href="view.html?id=${book.id}&title=${encodeURIComponent(book.title)}&author=${encodeURIComponent(book.author)}&genre=${encodeURIComponent(book.genre)}&isbn=${encodeURIComponent(book.isbn)}&year=${book.year}&dateAdded=${book.dateAdded}"
                        class="link-info link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover">${book.title}</a></td>
                    <td>${book.author}</td>
                    <td>${book.genre}</td>
                    <td>${book.isbn}</td>
                    <td>${book.year}</td>
                    <td>${book.dateAdded}</td>
                </tr>
            `;
                tableBody.insertAdjacentHTML('beforeend', row);
            });
        }
        
    </script>
</body>
</html>
